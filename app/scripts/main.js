(function (handHistoryConverter, $, ZeroClipboard) {
  'use strict';

  var exampleHHs = 'PokerStars Zoom Hand #999999999999:  Hold\'em No Limit ($0.01/$0.02) - 1970/01/01 00:00:00 ET\r\nTable \'McNaught\' 9-max Seat #1 is the button\r\nSeat 1: Race Beetle 123 ($1.97 in chips) \r\nSeat 2: brömideuranium ($2.10 in chips) \r\nSeat 3: ricketysnotty ($2 in chips) \r\nSeat 4: mindlessswaggering ($2.14 in chips) \r\nSeat 5: jonesvessels ($1.92 in chips) \r\nSeat 6: freegoring ($5.38 in chips) \r\nSeat 7: burgerrain ($4.07 in chips) \r\nSeat 8: buns: hiss ($2.21 in chips) \r\nSeat 9: rancher\'s pigeon ($1.68 in chips) \r\nbrömideuranium: posts small blind $0.01\r\nricketysnotty: posts big blind $0.02\r\n*** HOLE CARDS ***\r\nDealt to burgerrain [Qs Kd]\r\nmindlessswaggering: folds \r\njonesvessels: folds \r\nfreegoring: folds \r\nburgerrain: raises $0.02 to $0.04\r\nbuns: hiss: calls $0.04\r\nrancher\'s pigeon: folds \r\nRace Beetle 123: folds \r\nbrömideuranium: folds \r\nricketysnotty: folds \r\n*** FLOP *** [2c 6c 9h]\r\nburgerrain: bets $0.08\r\nbuns: hiss: calls $0.08\r\n*** TURN *** [2c 6c 9h] [Qd]\r\nburgerrain: checks \r\nbuns: hiss: bets $0.12\r\nburgerrain: calls $0.12\r\n*** RIVER *** [2c 6c 9h Qd] [Ah]\r\nburgerrain: checks \r\nbuns: hiss: bets $0.30\r\nburgerrain: folds \r\nUncalled bet ($0.30) returned to buns: hiss\r\nbuns: hiss collected $0.49 from pot\r\nbuns: hiss: doesn\'t show hand \r\n*** SUMMARY ***\r\nTotal pot $0.51 | Rake $0.02 \r\nBoard [2c 6c 9h Qd Ah]\r\nSeat 1: Race Beetle 123 (button) folded before Flop (didn\'t bet)\r\nSeat 2: brömideuranium (small blind) folded before Flop\r\nSeat 3: ricketysnotty (big blind) folded before Flop\r\nSeat 4: mindlessswaggering folded before Flop (didn\'t bet)\r\nSeat 5: jonesvessels folded before Flop (didn\'t bet)\r\nSeat 6: freegoring folded before Flop (didn\'t bet)\r\nSeat 7: burgerrain folded on the River\r\nSeat 8: buns: hiss collected ($0.49)\r\nSeat 9: rancher\'s pigeon folded before Flop (didn\'t bet)\r\n\r\nPokerStars Zoom Hand #999999999999:  Omaha Pot Limit ($0.01/$0.02) - 1970/01/01 00:00:00 ET\r\nTable \'Lovejoy\' 6-max Seat #1 is the button\r\nSeat 1: slashmat ($1 in chips) \r\nSeat 2: locustheron ($0.98 in chips) \r\nSeat 3: lavatwo ($3.29 in chips) \r\nSeat 4: coherentmacedonian ($2.42 in chips) \r\nSeat 5: chiptorn ($3.83 in chips) \r\nSeat 6: burgerrain ($2 in chips) \r\nlocustheron: posts small blind $0.01\r\nlavatwo: posts big blind $0.02\r\n*** HOLE CARDS ***\r\nDealt to burgerrain [Ts Js 7c Kd]\r\ncoherentmacedonian: folds \r\nchiptorn: folds \r\nburgerrain: raises $0.02 to $0.04\r\nslashmat: folds \r\nlocustheron: calls $0.03\r\nlavatwo: calls $0.02\r\n*** FLOP *** [6s 8c Qh]\r\nlocustheron: checks \r\nlavatwo: checks \r\nburgerrain: bets $0.08\r\nlocustheron: calls $0.08\r\nlavatwo: calls $0.08\r\n*** TURN *** [6s 8c Qh] [3h]\r\nlocustheron: checks \r\nlavatwo: checks \r\nburgerrain: bets $0.20\r\nlocustheron: calls $0.20\r\nlavatwo: folds \r\n*** RIVER *** [6s 8c Qh 3h] [3d]\r\nlocustheron: checks \r\nburgerrain: bets $0.74\r\nlocustheron: calls $0.66 and is all-in\r\nUncalled bet ($0.08) returned to burgerrain\r\n*** SHOW DOWN ***\r\nburgerrain: shows [Ts Js 7c Kd] (a pair of Threes)\r\nlocustheron: shows [Th Qs As Ad] (two pair, Aces and Threes)\r\nlocustheron collected $2.01 from pot\r\n*** SUMMARY ***\r\nTotal pot $2.08 | Rake $0.07 \r\nBoard [6s 8c Qh 3h 3d]\r\nSeat 1: slashmat (button) folded before Flop (didn\'t bet)\r\nSeat 2: locustheron (small blind) showed [Th Qs As Ad] and won ($2.01) with two pair, Aces and Threes\r\nSeat 3: lavatwo (big blind) folded on the Turn\r\nSeat 4: coherentmacedonian folded before Flop (didn\'t bet)\r\nSeat 5: chiptorn folded before Flop (didn\'t bet)\r\nSeat 6: burgerrain showed [Ts Js 7c Kd] and lost with a pair of Threes\r\n\r\nPokerStars Zoom Hand #999999999999:  Hold\'em No Limit ($0.10/$0.25) - 1970/01/01 00:00:00 ET\r\nTable \'Whirlpool\' 9-max Seat #1 is the button\r\nSeat 1: bicyclebullhead ($42.15 in chips) \r\nSeat 2: tradesaccidental ($17.89 in chips) \r\nSeat 3: mundanetrue ($38.93 in chips) \r\nSeat 4: accidentalbreak ($25 in chips) \r\nSeat 5: meadowlarksmell ($22.45 in chips) \r\nSeat 6: burgerrain ($25 in chips) \r\nSeat 7: sleuthpuce ($61.27 in chips) \r\nSeat 8: journalisthover ($47.56 in chips) \r\nSeat 9: brightdon ($26.40 in chips) \r\ntradesaccidental: posts small blind $0.10\r\nmundanetrue: posts big blind $0.25\r\n*** HOLE CARDS ***\r\nDealt to burgerrain [8c 8s]\r\naccidentalbreak: folds \r\nmeadowlarksmell: folds \r\nburgerrain: raises $0.50 to $0.75\r\nsleuthpuce: folds \r\njournalisthover: folds \r\nbrightdon: calls $0.75\r\nbicyclebullhead: folds \r\ntradesaccidental: calls $0.65\r\nmundanetrue: folds \r\n*** FLOP *** [5h 6h 2d]\r\ntradesaccidental: checks \r\nburgerrain: bets $1.50\r\nbrightdon: folds \r\ntradesaccidental: calls $1.50\r\n*** TURN *** [5h 6h 2d] [Ks]\r\ntradesaccidental: checks \r\nburgerrain: checks \r\n*** RIVER *** [5h 6h 2d Ks] [Qh]\r\ntradesaccidental: checks \r\nburgerrain: checks \r\n*** SHOW DOWN ***\r\ntradesaccidental: shows [8d 8h] (a pair of Eights)\r\nburgerrain: shows [8c 8s] (a pair of Eights)\r\ntradesaccidental collected $2.63 from pot\r\nburgerrain collected $2.62 from pot\r\n*** SUMMARY ***\r\nTotal pot $5.50 | Rake $0.25 \r\nBoard [5h 6h 2d Ks Qh]\r\nSeat 1: bicyclebullhead (button) folded before Flop (didn\'t bet)\r\nSeat 2: tradesaccidental (small blind) showed [8d 8h] and won ($2.63) with a pair of Eights\r\nSeat 3: mundanetrue (big blind) folded before Flop\r\nSeat 4: accidentalbreak folded before Flop (didn\'t bet)\r\nSeat 5: meadowlarksmell folded before Flop (didn\'t bet)\r\nSeat 6: burgerrain showed [8c 8s] and won ($2.62) with a pair of Eights\r\nSeat 7: sleuthpuce folded before Flop (didn\'t bet)\r\nSeat 8: journalisthover folded before Flop (didn\'t bet)\r\nSeat 9: brightdon folded on the Flop\r\n\r\nPokerStars Hand #999999999999:  Hold\'em No Limit ($0.08/$0.16 USD) - 1970/01/01 00:00:00 ET\r\nTable \'Deimos III\' 9-max Seat #8 is the button\r\nSeat 1: stiffdriver ($16 in chips) \r\nSeat 2: curryhippopotamus ($15.71 in chips) \r\nSeat 4: jordanianoff ($11.58 in chips) \r\nSeat 6: smokingpoppy ($16.74 in chips) \r\nSeat 7: burgerrain ($21.44 in chips) \r\nSeat 8: dolechlorine ($14.71 in chips) \r\nSeat 9: vagabondgerman ($19.33 in chips) \r\nvagabondgerman: posts small blind $0.08\r\nstiffdriver: posts big blind $0.16\r\nmar1o_md: sits out \r\n*** HOLE CARDS ***\r\nDealt to burgerrain [2c 3s]\r\ncurryhippopotamus: folds \r\njordanianoff: folds \r\nsmokingpoppy: folds \r\nburgerrain: folds \r\ndolechlorine: folds \r\nvagabondgerman: folds \r\nUncalled bet ($0.08) returned to stiffdriver\r\nstiffdriver collected $0.16 from pot\r\nstiffdriver: doesn\'t show hand \r\n*** SUMMARY ***\r\nTotal pot $0.16 | Rake $0 \r\nSeat 1: stiffdriver (big blind) collected ($0.16)\r\nSeat 2: curryhippopotamus folded before Flop (didn\'t bet)\r\nSeat 4: jordanianoff folded before Flop (didn\'t bet)\r\nSeat 6: smokingpoppy folded before Flop (didn\'t bet)\r\nSeat 7: burgerrain folded before Flop (didn\'t bet)\r\nSeat 8: dolechlorine (button) folded before Flop (didn\'t bet)\r\nSeat 9: vagabondgerman (small blind) folded before Flop\r\n\r\nFull Tilt Poker Game #99999999999: Table Alacrity (6 max) - PL Omaha Hi - $0.10/$0.25 - 00:00:00 ET - 1970/01/01\r\nSeats: 6\r\nSeat 1: holingwealth ($23.65)\r\nSeat 2: snappingforehead ($33.07)\r\nSeat 3: platesdeceit ($50.38)\r\nSeat 4: bloomingnide ($11.97)\r\nSeat 5: tenderactuary ($26.27)\r\nSeat 6: bowlecstatic ($42.76)\r\nplatesdeceit posts the small blind of $0.10\r\nbloomingnide posts the big blind of $0.25\r\nThe button is in seat #2\r\n*** HOLE CARDS ***\r\nDealt to tenderactuary [7d 9h 8c 6c]\r\ntenderactuary raises to $0.50\r\nbowlecstatic folds\r\nholingwealth calls $0.50\r\nsnappingforehead folds\r\nplatesdeceit calls $0.40\r\nbloomingnide raises to $2.50\r\ntenderactuary calls $2\r\nholingwealth folds\r\nplatesdeceit calls $2\r\n*** FLOP *** [2d 9c Ac] (Total Pot: $8, 3 Players)\r\nplatesdeceit checks\r\nbloomingnide checks\r\ntenderactuary bets $4.50\r\nplatesdeceit folds\r\nbloomingnide raises to $9.47, and is all in\r\ntenderactuary calls $4.97\r\nbloomingnide shows [Qd As Ad 8s]\r\ntenderactuary shows [7d 9h 8c 6c]\r\n*** TURN *** [2d 9c Ac] [Qh] (Total Pot: $26.94, 2 Players, 1 All-In)\r\n*** RIVER *** [2d 9c Ac Qh] [5c] (Total Pot: $26.94, 2 Players, 1 All-In)\r\nbloomingnide shows three of a kind, Aces\r\ntenderactuary shows a flush, Ace high\r\ntenderactuary wins the pot ($25.60) with a flush, Ace high\r\n*** SUMMARY ***\r\nTotal pot $26.94 | Rake $1.34\r\nBoard: [2d 9c Ac Qh 5c]\r\nSeat 1: holingwealth folded before the Flop\r\nSeat 2: snappingforehead (button) didn\'t bet (folded)\r\nSeat 3: platesdeceit (small blind) folded on the Flop\r\nSeat 4: bloomingnide (big blind) showed [Qd As Ad 8s] and lost with three of a kind, Aces\r\nSeat 5: tenderactuary showed [7d 9h 8c 6c] and won ($25.60) with a flush, Ace high\r\nSeat 6: bowlecstatic didn\'t bet (folded)\r\n\r\nFull Tilt Poker Game #99999999999: Table Rosilla (6 max) - PL 6 Card Omaha Hi - $0.05/$0.10 - 00:00:00 ET - 1970/01/01\r\nSeat 1: epilepticeggs ($3.97)\r\nSeat 2: dustergloves ($3.34)\r\nSeat 3: vinesgale ($10.37)\r\nSeat 4: tenderactuary ($12.11)\r\nSeat 5: kettlemutter ($13.71)\r\nSeat 6: grovewig ($33.94)\r\ntenderactuary posts the small blind of $0.05\r\nkettlemutter posts the big blind of $0.10\r\nThe button is in seat #3\r\n*** HOLE CARDS ***\r\nDealt to tenderactuary [6s 5h As Ad 3h 5d]\r\ngrovewig raises to $0.30\r\nepilepticeggs calls $0.30\r\ndustergloves folds\r\nvinesgale calls $0.30\r\ntenderactuary raises to $1.60\r\nkettlemutter folds\r\ngrovewig calls $1.30\r\nepilepticeggs calls $1.30\r\nvinesgale has 15 seconds left to act\r\nvinesgale raises to $8.10\r\nepilepticeggs is feeling confused\r\ntenderactuary raises to $12.11, and is all in\r\ngrovewig calls $10.51\r\nepilepticeggs calls $2.37, and is all in\r\nvinesgale calls $2.27, and is all in\r\ntenderactuary shows [6s 5h As Ad 3h 5d]\r\ngrovewig shows [4c Kh 4d 5c Kd 6h]\r\nepilepticeggs shows [Ts 8d 2h 9s 7s Th]\r\nvinesgale shows [Jd 7c Ac Qc 9d 9h]\r\n*** FLOP *** [9c Td 6c] (Total Pot: $38.66, 4 Players, 3 All-In)\r\n*** TURN *** [9c Td 6c] [Js] (Total Pot: $38.66, 4 Players, 3 All-In)\r\n*** RIVER *** [9c Td 6c Js] [6d] (Total Pot: $38.66, 4 Players, 3 All-In)\r\ntenderactuary shows three of a kind, Sixes\r\ngrovewig shows three of a kind, Sixes\r\ntenderactuary wins side pot #2 ($3.30) with three of a kind, Sixes\r\nvinesgale shows a full house, Nines full of Sixes\r\nvinesgale wins side pot #1 ($18.24) with a full house, Nines full of Sixes\r\nepilepticeggs shows a full house, Tens full of Sixes\r\nepilepticeggs wins the main pot ($15.19) with a full house, Tens full of Sixes\r\n*** SUMMARY ***\r\nTotal pot $38.66 Main pot $15.98. Side pot 1 $19.20. Side pot 2 $3.48. | Rake $1.93\r\nBoard: [9c Td 6c Js 6d]\r\nSeat 1: epilepticeggs showed [Ts 8d 2h 9s 7s Th] and won ($15.19) with a full house, Tens full of Sixes\r\nSeat 2: dustergloves didn\'t bet (folded)\r\nSeat 3: vinesgale (button) showed [Jd 7c Ac Qc 9d 9h] and won ($18.24) with a full house, Nines full of Sixes\r\nSeat 4: tenderactuary (small blind) showed [6s 5h As Ad 3h 5d] and won ($3.30) with three of a kind, Sixes\r\nSeat 5: kettlemutter (big blind) folded before the Flop\r\nSeat 6: grovewig showed [4c Kh 4d 5c Kd 6h] and lost with three of a kind, Sixes\r\n\r\nFull Tilt Poker Game #99999999999: Table Bazinga (6 max) - NL Hold\'em - $0.02/$0.05 - 00:00:00 ET - 1970/01/01\r\nSeats: 6\r\nSeat 1: offclay ($5)\r\nSeat 2: tenderactuary ($9.39)\r\nSeat 3: jayweyr ($5.37)\r\nSeat 4: maroonsame ($7.63)\r\nSeat 5: noisytin ($7)\r\nSeat 6: fittingjangling ($5.10)\r\noffclay posts the small blind of $0.02\r\ntenderactuary posts the big blind of $0.05\r\nThe button is in seat #6\r\n*** HOLE CARDS ***\r\nDealt to tenderactuary [Ac 9c]\r\njayweyr raises to $0.17\r\nmaroonsame has 15 seconds left to act\r\nmaroonsame folds\r\nnoisytin calls $0.17\r\nfittingjangling folds\r\noffclay calls $0.15\r\ntenderactuary raises to $0.75\r\njayweyr folds\r\nnoisytin folds\r\noffclay calls $0.58\r\n*** FLOP *** [Kd 5s Ad] (Total Pot: $1.84, 2 Players)\r\noffclay checks\r\ntenderactuary checks\r\n*** TURN *** [Kd 5s Ad] [7c] (Total Pot: $1.84, 2 Players)\r\noffclay bets $1\r\ntenderactuary calls $1\r\n*** RIVER *** [Kd 5s Ad 7c] [6h] (Total Pot: $3.84, 2 Players)\r\noffclay checks\r\ntenderactuary bets $1\r\noffclay raises to $3.25, and is all in\r\ntenderactuary calls $2.25\r\n*** SHOW DOWN ***\r\noffclay shows [Th Ts] a pair of Tens\r\ntenderactuary shows [Ac 9c] a pair of Aces\r\ntenderactuary wins the pot ($9.83) with a pair of Aces\r\n*** SUMMARY ***\r\nTotal pot $10.34 | Rake $0.51\r\nBoard: [Kd 5s Ad 7c 6h]\r\nSeat 1: offclay (small blind) showed [Th Ts] and lost with a pair of Tens\r\nSeat 2: tenderactuary (big blind) showed [Ac 9c] and won ($9.83) with a pair of Aces\r\nSeat 3: jayweyr folded before the Flop\r\nSeat 4: maroonsame didn\'t bet (folded)\r\nSeat 5: noisytin folded before the Flop\r\nSeat 6: fittingjangling (button) didn\'t bet (folded)\r\n\r\nFull Tilt Poker Game #99999999999: Table Glen Ora - $0.10/$0.20 - Limit Omaha H/L - 00:00:00 ET - 1970/01/01\r\nSeat 1: unsightlymuffin ($1.90)\r\nSeat 3: deanfoamy ($1.38)\r\nSeat 6: acceptabledented ($6.66)\r\nSeat 7: tenderactuary ($8.46)\r\ntenderactuary posts the small blind of $0.05\r\nunsightlymuffin posts the big blind of $0.10\r\nThe button is in seat #6\r\n*** HOLE CARDS ***\r\nDealt to tenderactuary [As 3d Td 8d]\r\ndeanfoamy calls $0.10\r\nacceptabledented folds\r\ntenderactuary calls $0.05\r\nunsightlymuffin checks\r\n*** FLOP *** [8c 6c Ts] (Total Pot: $0.30, 3 Players)\r\ntenderactuary bets $0.10\r\nunsightlymuffin folds\r\ndeanfoamy raises to $0.20\r\ntenderactuary calls $0.10\r\n*** TURN *** [8c 6c Ts] [8h] (Total Pot: $0.70, 2 Players)\r\ntenderactuary bets $0.20\r\ndeanfoamy raises to $0.40\r\ntenderactuary calls $0.20\r\n*** RIVER *** [8c 6c Ts 8h] [4c] (Total Pot: $1.50, 2 Players)\r\ntenderactuary bets $0.20\r\ndeanfoamy raises to $0.40\r\ntenderactuary raises to $0.60\r\ndeanfoamy calls $0.20\r\n*** SHOW DOWN ***\r\ntenderactuary shows [As 3d Td 8d] a full house, Eights full of Tens, for high and 8,6,4,3,A, for low\r\ndeanfoamy mucks\r\ntenderactuary wins the high pot ($1.29) with a full house, Eights full of Tens\r\ntenderactuary wins the low pot ($1.28) with 8,6,4,3,A\r\n*** SUMMARY ***\r\nTotal pot $2.70 | Rake $0.13\r\nBoard: [8c 6c Ts 8h 4c]\r\nSeat 1: unsightlymuffin (big blind) folded on the Flop\r\nSeat 3: deanfoamy mucked [6d 9s 9d 7s] - HI: a straight, Ten high\r\nSeat 6: acceptabledented (button) didn\'t bet (folded)\r\nSeat 7: tenderactuary (small blind) showed [As 3d Td 8d] and won ($2.57) with HI: a full house, Eights full of Tens; LO: 8,6,4,3,A\r\n';


  $(function () {
    var $input = $('#input');
    var $output = $('#output');
    var $outputContainer = $('#output-container');
    var $convert = $('#convert');

    var output = { // return object of convert()
      'html': '',
      'inlineHTML': '' // used for the clipboard
    };

    // convert button
    $convert.on('click', function () {
      output = handHistoryConverter.convert($input.val(), {
        'hideUsernames': $('#hide-usernames').prop('checked'),
        'betsInBB': $('#bets-in-bb').prop('checked')
      });
      $output.html(output.html);
      // hide the output container if the result is empty
      $outputContainer.toggle(output.html !== '');
    });

    // view examples button
    $('#convert-examples').on('click', function () {
      $input.val(exampleHHs);
      $convert.trigger('click');
    });

    // clipboard button
    ZeroClipboard.config({ // for Linux
      'forceEnhancedClipboard': true
    });
    var zeroClipboardClient = new ZeroClipboard($('#copy'));
    zeroClipboardClient.on('copy', function (event) {
      event.clipboardData.setData({
        'text/plain': $output.text(),
        'text/html': output.inlineHTML
      });
    });
  });
}(handHistoryConverter, jQuery, ZeroClipboard));
